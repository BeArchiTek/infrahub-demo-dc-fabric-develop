# yaml-language-server: $schema=https://schema.infrahub.app/develop/schema.schema.json
---
version: '1.0'
nodes:
  - name: Topology
    namespace: Infra
    description: "A Topology represent a a top level network topology pod."
    label: "Topology"
    icon: "mdi:vector-triangle"
    default_filter: name__value
    order_by:
      - name__value
    display_labels:
      - name__value
    inherit_from:
      - "CoreArtifactTarget"
    attributes:
      - name: name
        kind: Text
        unique: true
      - name: description
        kind: Text
        optional: true
      - name: dns
        kind: Text
        optional: true
      - name: ntp
        kind: Text
        optional: true
      - name: syslog
        kind: Text
        optional: true
      - name: mtu
        kind: Number
        optional: true
    relationships:
      - name: element
        peer: InfraTopologyElement
        identifier: "topology__element"
        optional: true
        cardinality: many
        kind: Component
      - name: devices
        peer: InfraDevice
        identifier: "topology__device"
        optional: true
        cardinality: many
        kind: Component
  - name: TopologyElement
    namespace: Infra
    description: "A TopologyElement represent a device within a topology pod."
    label: "TopologyElement"
    icon: "mdi:vector-point-select"
    menu_placement: "InfraTopology"
    include_in_menu: true
    default_filter: name__value
    order_by:
      - name__value
    display_labels:
      - name__value
    attributes:
      - name: name
        kind: Text
        unique: true
      - name: description
        kind: Text
        optional: true
      - name: amount
        kind: Number
      - name: type
        kind: Text
      - name: role
        kind: Dropdown
        optional: true
        choices:
          - name: core
            label: Core Router
            description: Central part of the network.
            color: "#7f7fff"
          - name: edge
            label: Edge Router
            description: "Network boundary with external networks."
            color: "#bf7fbf"
          - name: cpe
            label: Customer Premise Equipment
            description: "Devices located at the customer's premises."
            color: "#bf7f7f"
          - name: firewall
            label: Firewall
            description: "Ensures network security."
            color: "#ffa07a"
          - name: spine
            label: Spine Router
            description: "Aggregation router part of a Fabric."
            color: "#aeeeee"
          - name: leaf
            label: Leaf Switch
            description: "Top of Rack part of a Fabric."
            color: "#e6e6fa"
          - name: client
            label: "Client"
            description: "Client & Server endpoints in a Fabric."
            color: "#c5a3ff"
    relationships:
      - name: platform
        peer: InfraPlatform
        optional: true
        cardinality: one
        kind: Attribute
      - name: topology
        peer: InfraTopology
        identifier: "topology__element"
        optional: false
        cardinality: one
        kind: Parent
