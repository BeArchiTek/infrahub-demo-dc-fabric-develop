name: avdasymirb

topology:
  kinds:
    ceos:
      startup-config: ceos.cfg.tpl
      image: ceosimage:4.29.0.2F
      exec:
        - sleep 10
        - FastCli -p 15 -c 'security pki key generate rsa 4096 eAPI.key'
        - FastCli -p 15 -c 'security pki certificate generate self-signed eAPI.crt key eAPI.key generate rsa 4096 validity 30000 parameters common-name eAPI'
    linux:
      image: alpine-host
  nodes:
    spine1:
      kind: ceos
      mgmt_ipv4: 172.100.100.2
    spine2:
      kind: ceos
      mgmt_ipv4: 172.100.100.3
    leaf11:
      kind: ceos
      mgmt_ipv4: 172.100.100.4
    leaf12:
      kind: ceos
      mgmt_ipv4: 172.100.100.5
    leaf21:
      kind: ceos
      mgmt_ipv4: 172.100.100.6
    leaf22:
      kind: ceos
      mgmt_ipv4: 172.100.100.7
    client1:
      kind: linux
      mgmt_ipv4: 172.100.100.8
      env:
        TMODE: lacp
    client2:
      kind: linux
      mgmt_ipv4: 172.100.100.9
      env:
        TMODE: lacp
  
  links:
    - endpoints: ["leaf11:eth1", "spine1:eth1"]
    - endpoints: ["leaf12:eth1", "spine1:eth2"]
    - endpoints: ["leaf21:eth1", "spine1:eth3"]
    - endpoints: ["leaf22:eth1", "spine1:eth4"]
    - endpoints: ["leaf11:eth2", "spine2:eth1"]
    - endpoints: ["leaf12:eth2", "spine2:eth2"]
    - endpoints: ["leaf21:eth2", "spine2:eth3"]
    - endpoints: ["leaf22:eth2", "spine2:eth4"]
    - endpoints: ["leaf11:eth3", "leaf12:eth3"]
    - endpoints: ["leaf11:eth4", "leaf12:eth4"]
    - endpoints: ["leaf21:eth3", "leaf22:eth3"]
    - endpoints: ["leaf21:eth4", "leaf22:eth4"]
    - endpoints: ["leaf11:eth5", "client1:eth1"]
    - endpoints: ["leaf22:eth5", "client2:eth1"]

mgmt:
  network: ceos_clab                
  ipv4_subnet: 172.100.100.0/24       
  ipv6_subnet: 2001:172:100:100::/80
